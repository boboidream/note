(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{542:function(s,a,e){"use strict";e.r(a);var t=e(42),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"assets"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#assets"}},[s._v("#")]),s._v(" Assets")]),s._v(" "),e("h2",{attrs:{id:"引入不同类型文件-约定位置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引入不同类型文件-约定位置"}},[s._v("#")]),s._v(" 引入不同类型文件，约定位置")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("app/assets  # 存放当前程序用到的资源文件\nlib/assets  # 存放自己开发的代码库用到的资源文件\nvendor/assets  # 第三方代码库用到的资源文件\n")])])]),e("h2",{attrs:{id:"全局-js-css-scss-images-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全局-js-css-scss-images-文件"}},[s._v("#")]),s._v(" 全局 js css scss images 文件")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("`application.js` 与 `application.css` 一般用于引入全局使用的 js 或 css\n")])])]),e("h2",{attrs:{id:"自己编写的-javascripts-或-stylesheets-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自己编写的-javascripts-或-stylesheets-文件"}},[s._v("#")]),s._v(" 自己编写的 javascripts 或 stylesheets 文件")]),s._v(" "),e("ul",[e("li",[s._v("javascripts 文件\n通常针对产品的不同端（如web端、PC端、后台）等建立分离的管理文件，如"),e("code",[s._v("web_app.js")]),s._v("，"),e("code",[s._v("dashbord.js")]),s._v("等,引入其他文件的语法是"),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# manage_file.js 中添加,引入文件\n//= require user\n")])])])])]),s._v(" "),e("p",[s._v("如此一来，只需要在 "),e("code",[s._v("layout")]),s._v("文件中，引用 "),e("code",[s._v("manage_file")]),s._v("即可")]),s._v(" "),e("ul",[e("li",[s._v("stylesheets 文件\n样式文件引入有两种方式，第一种是 assets 方式，同 js 管理方式，也可以针对某端，建立单独的管理文件，如："),e("code",[s._v("web_app.css")]),s._v("，引入其他 css 方式是："),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 在文件头部，通过注释方式引入\n*= require jquery.Jcrop\n")])])]),s._v("另一种方式更加优雅些，也是项目中在用的一种方式，通过 SCSS 的 "),e("code",[s._v("@import")]),s._v(" 机制引入。要求管理文件后缀为"),e("code",[s._v("scss")]),s._v("或"),e("code",[s._v("sass")]),s._v(" 只需要在头部添加"),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("@import 'my_css.scss'\n")])])])])]),s._v(" "),e("h2",{attrs:{id:"第三方库的引入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第三方库的引入"}},[s._v("#")]),s._v(" 第三方库的引入")]),s._v(" "),e("p",[s._v("Rails 管理第三方库的方法，与管理自己编写的文件稍有不同")]),s._v(" "),e("ol",[e("li",[s._v("在项目根目录会发现有一个 "),e("code",[s._v("vendor")]),s._v(" 文件夹，如果没有自己可以新建一个，其文件夹结构与 Assets 一模一样，如："),e("code",[s._v("vendor/stylesheets/my_css.scss")]),s._v(" 或 "),e("code",[s._v("vendor/javascripts/my_js.js")]),s._v("。")]),s._v(" "),e("li",[s._v("在config/application.rb中加上如下配置项,才会启用Assets功能\nconfig.assets.enabled = true")]),s._v(" "),e("li",[s._v("剩下的就和之前引用自己编写的文件方式一样啦。非常便捷")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("提醒：引入资源文件如 css,js,img 等都需重启服务器。另外，如果引入后报错，往往会提示你在某文件，通常是 config/assets 文件中添加某句话，照着提示一步步做就可以啦。\n")])])]),e("h2",{attrs:{id:"不启用-assets-时-引入文件的做法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#不启用-assets-时-引入文件的做法"}},[s._v("#")]),s._v(" 不启用 Assets 时，引入文件的做法")]),s._v(" "),e("p",[s._v("添加文件后需要在 "),e("code",[s._v("config/application.rb")]),s._v(" 中添加，让 Asset Pipiline 兼容")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("require File.expand_path('../boot', __FILE__)\n")])])]),e("ul",[e("li",[e("a",{attrs:{href:"http://stackoverflow.com/questions/7411271/form-submitted-twice-due-to-remote-true",target:"_blank",rel:"noopener noreferrer"}},[s._v("由于引用两次ujs导致remote submit twith"),e("OutboundLink")],1)])]),s._v(" "),e("h2",{attrs:{id:"预处理机制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预处理机制"}},[s._v("#")]),s._v(" 预处理机制")]),s._v(" "),e("p",[s._v("foobar.js.erb.coffee  # 按照扩展名从右向左处理\nasset pipeline 默认合并压缩 css/js 文件")]),s._v(" "),e("h2",{attrs:{id:"scss"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scss"}},[s._v("#")]),s._v(" SCSS")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("&:hover {  # 引用父标签\n  ...\n}\n\nBootstrap 中有颜色变量，以@开头，可直接在 SCSS 中替换$ 使用\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);
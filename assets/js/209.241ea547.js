(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{579:function(e,t,n){"use strict";n.r(t);var r=n(42),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"liferecycle"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#liferecycle"}},[e._v("#")]),e._v(" LifeRecycle")]),e._v(" "),n("h3",{attrs:{id:"实现监听页面钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现监听页面钩子"}},[e._v("#")]),e._v(" 实现监听页面钩子")]),e._v(" "),n("p",[e._v("参考：https://www.jianshu.com/p/3edfa7d694e7")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("在"),n("strong",[e._v("MaterialApp")]),e._v("中定义一个"),n("strong",[e._v("RouteObserver")]),e._v("对象")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("final RouteObserver<Route<dynamic>> routeObserver = RouteObserver();\n\nclass MyApp extends StatelessWidget {\n    ... \\\\此处省略一些代码\n\n    Widget _buildMaterialApp() => MaterialApp(\n      initialRoute: '/',\n      navigatorObservers: [routeObserver], //添加路由观察者\n      onGenerateRoute: _onGenerateRoute);\n}\n")])])])]),e._v(" "),n("li",[n("p",[e._v("在B页面中混淆"),n("strong",[e._v("RouteAware")]),e._v(", 并注册"),n("strong",[e._v("RouteObserver")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('class B extends StatefulWidget {\n     B({Key key}) : super(key: key);\n}\n\nclass BState extends State<B>  with RouteAware {\n  @override\n  void didChangeDependencies() {\n    routeObserver.subscribe(this, ModalRoute.of(context)); //订阅\n    super.didChangeDependencies();\n  }\n\n  @override\n  void didPush() {\n    debugPrint("------\x3e didPush");\n    super.didPush();\n  }\n\n  @override\n  void didPop() {\n    debugPrint("------\x3e didPop");\n    super.didPop();\n  }\n\n  @override\n  void didPopNext() {\n    debugPrint("------\x3e didPopNext");\n    super.didPopNext();\n  }\n  \n@override\n  void didPushNext() {\n    debugPrint("------\x3e didPushNext");\n    super.didPushNext();\n  }\n\n  @override\n  void dispose() {\n    routeObserver.unsubscribe(this); //取消订阅\n    super.dispose();\n  }\n}\n')])])])])])])}),[],!1,null,null,null);t.default=s.exports}}]);